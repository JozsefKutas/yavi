<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Combining validators</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="combining-validators">Combining validators</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>ApplicativeValidator&lt;T&gt;</code> and <code>Arguments1Validator&lt;S, T&gt;</code> we&#8217;ve seen so far extend <code>ValueValidator&lt;S, T&gt;</code>.
<code>T</code> is the type of the target object to be validated and <code>S</code> is the type of the source object to create the target object.
<code>ApplicativeValidator&lt;T&gt;</code> is equivalent to <code>ValueValidator&lt;T, T&gt;</code>.</p>
</div>
<div class="paragraph">
<p><code>ValueValidator</code> can be combined to validate a larger object.</p>
</div>
<div class="sect2">
<h3 id="_splitting_a_validator_for_an_object_into_small_pieces">Splitting a validator for an object into small pieces</h3>
<div class="paragraph">
<p>You can use <code>split</code> method to split the constructor and the arguments of the factory method for creating a large Object into small validators and combine them.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at an example.</p>
</div>
<div class="paragraph">
<p>Validator for constructor <code>Person(String, String, Integer)</code> is <code>Arguments3Validator&lt;String, String, Integer, Person&gt;</code>.
This can be divided into two <code>StringValidator&lt;String&gt;</code> and one <code>IntegerValidator&lt;Integer&gt;</code> and then combined.</p>
</div>
<div class="paragraph">
<p>It can be defined as bellow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Person {
    public Person(String name, String email, Integer age) {
        // ...
    }
}

StringValidator&lt;String&gt; nameValidator = ...;
StringValidator&lt;String&gt; emailValidator = ...;
IntegerValidator&lt;Integer&gt; ageValidator = ...;

Arguments3Validator&lt;String, String, Integer, Person&gt; personValidator = ArgumentsValidators
    .split(nameValidator, emailValidator, ageValidator)
    .apply(Person::new);
// or
Arguments3Validator&lt;String, String, Integer, Person&gt; personValidator = nameValidator
    .split(emailValidator)
    .split(ageValidator)
    .apply(Person::new);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same goes for Validators for Value Objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Person {
    public Person(Name name, Email email, Age age) {
        // ...
    }
}

StringValidator&lt;Name&gt; nameValidator = ...;
StringValidator&lt;Email&gt; emailValidator = ...;
IntegerValidator&lt;Age&gt; ageValidator = ...;

Arguments3Validator&lt;String, String, Integer, Person&gt; personValidator = ArgumentsValidators
    .split(nameValidator, emailValidator, ageValidator)
    .apply(Person::new);
// or
Arguments3Validator&lt;String, String, Integer, Person&gt; personValidator = nameValidator
    .split(emailValidator)
    .split(ageValidator)
    .apply(Person::new);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The created Validator can be used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Validated&lt;Person&gt; personValidated = Person.validator.validate("Jone Doe", "jdoe@example.com", 30);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the argument of <code>ArgumentsValidators.split</code> is <code>ValueValidator</code> rather than <code>Arguments1Validator</code>, you can also combine <code>ApplicativeValidators</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">ApplicativeValidator&lt;Email&gt; emailValidator = ...;
ApplicativeValidator&lt;PhoneNumber&gt; phoneNumberValidator = ...;

Arguments2Validator&lt;Email, PhoneNumber, ContactInfo&gt; contactInfoValidator = ArgumentsValidators
    .split(emailValidator, phoneNumberValidator)
    .apply(ContactInfo::new);

Validated&lt;ContactInfo&gt; contactInfoValidated = contactInfoValidator.validate(new Email("yavi@example.com"), new PhoneNumber("090-123-4567"));</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-06-15 09:14:20 UTC
</div>
</div>
<link rel="stylesheet" href="js/highlight/styles/github.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
</body>
</html>